# 2. openpilot이란 무엇인가

## 한 문장 정의

> **openpilot은 300개 이상의 차량에서 작동하는 오픈소스 레벨 2 자율주행 시스템입니다.**

이 한 문장에 담긴 의미를 하나씩 풀어보겠습니다.

## 자율주행 레벨 이해하기

먼저 자율주행의 레벨을 알아야 openpilot의 위치를 이해할 수 있습니다.

### SAE 자율주행 레벨

SAE(Society of Automotive Engineers)는 자율주행을 6단계로 분류합니다:

| 레벨 | 이름 | 설명 | 예시 |
|------|------|------|------|
| **0** | 자동화 없음 | 운전자가 모든 것을 제어 | 일반 차량 |
| **1** | 운전자 보조 | 조향 또는 가감속 중 하나만 | 크루즈 컨트롤 |
| **2** | 부분 자동화 | 조향 + 가감속 동시 가능 | **openpilot** |
| **3** | 조건부 자동화 | 특정 조건에서 완전 자율 | Audi Traffic Jam Pilot |
| **4** | 고도 자동화 | 대부분 상황에서 자율 | Waymo (지정 구역) |
| **5** | 완전 자동화 | 모든 상황에서 자율 | 아직 존재하지 않음 |

### 레벨 2의 의미

**openpilot = 레벨 2**는 다음을 의미합니다:

✅ **할 수 있는 것**
```
1. 차선 중앙 유지 (Lateral Control)
   - 카메라로 차선 인식
   - 스티어링 자동 조작
   
2. 속도 조절 (Longitudinal Control)
   - 앞차 거리 유지
   - 자동 가감속
   
3. 두 기능을 동시에!
   - 고속도로에서 편안한 주행
   - 정체 구간에서도 작동
```

❌ **할 수 없는 것**
```
1. 운전자 없이 주행
2. 신호등 인식 및 대응
3. 교차로 판단
4. 자동 주차
5. 비상 상황 완전 대처
```

⚠️ **핵심**: **항상 운전자가 감시해야 합니다!**

## openpilot vs 다른 시스템

### Tesla Autopilot과의 비교

| 특징 | openpilot | Tesla Autopilot |
|------|-----------|----------------|
| **레벨** | 2 | 2 |
| **오픈소스** | ✅ 완전 공개 | ❌ 폐쇄 소스 |
| **지원 차량** | 300+ 모델 | Tesla만 |
| **가격** | ~$1,500 | 차량 포함 |
| **커스터마이징** | ✅ 가능 | ❌ 불가능 |
| **업데이트** | 매일 | 월 1-2회 |

### 다른 ADAS와의 비교

**기존 ADAS** (Honda Sensing, Toyota Safety Sense 등)
- 차량 제조사가 제공
- 제한적인 기능
- 업데이트 불가능
- 특정 차량만

**openpilot**
- 오픈소스 커뮤니티
- 지속적인 기능 향상
- 정기적인 업데이트
- 다양한 차량 지원

## openpilot의 구성 요소

openpilot 시스템은 크게 3가지로 구성됩니다:

### 1. 하드웨어: comma 3X

```
comma 3X 장치
├── 전면 카메라 (Road Camera)
│   └── 도로, 차선, 차량 인식
├── 내부 카메라 (Driver Camera)
│   └── 운전자 주의 감시
├── GPS
│   └── 위치 및 속도 정보
├── 프로세서 (Snapdragon)
│   └── AI 모델 실행
└── 디스플레이
    └── 주행 정보 표시
```

**가격**: 약 $1,299 (2025년 기준)

### 2. 소프트웨어: openpilot

```python
openpilot/
├── selfdrive/          # 핵심 자율주행 로직
│   ├── modeld/         # AI 비전 모델
│   ├── controls/       # 차량 제어
│   └── locationd/      # 위치 추정
├── cereal/             # 메시지 시스템
├── opendbc/            # 차량 인터페이스
└── panda/              # 하드웨어 인터페이스
```

**라이선스**: MIT (완전 오픈소스)

### 3. 차량 인터페이스: panda

**panda**는 comma 3X와 차량을 연결하는 하드웨어입니다:

```
comma 3X ←→ panda ←→ 차량 CAN 버스
```

**역할**:
- CAN 버스 통신
- 안전 모델 구현
- 차량 상태 읽기
- 제어 명령 전송

## openpilot의 작동 원리 (간단 버전)

전체 과정을 간단하게 설명하면:

```
1️⃣ 카메라가 도로를 촬영
   ↓
2️⃣ AI 모델이 차선과 차량을 인식
   ↓
3️⃣ 어디로 갈지 경로를 계획
   ↓
4️⃣ 스티어링과 가감속 명령을 생성
   ↓
5️⃣ panda가 안전성을 검사
   ↓
6️⃣ 차량이 명령을 실행
```

**주기**: 이 과정이 초당 100회 반복됩니다! (100Hz)

## 지원 차량

openpilot은 2025년 기준 **300개 이상**의 차량 모델을 지원합니다.

### 주요 제조사

**한국차**
- Hyundai / Kia / Genesis (70+ 모델)

**일본차**
- Toyota / Lexus (100+ 모델)
- Honda / Acura (40+ 모델)
- Nissan
- Subaru

**미국차**
- GM (Chevrolet, Cadillac)
- Ford

**유럽차**
- Volkswagen / Audi
- Volvo

### 지원 확인 방법

1. **온라인 확인**
   - https://comma.ai/vehicles

2. **저장소에서 확인**
   ```bash
   cat openpilot/docs/CARS.md
   ```

3. **차량별 지원 수준**
   - ⭐⭐⭐ Full: 모든 기능 지원
   - ⭐⭐ Limited: 일부 기능만
   - ⭐ Experimental: 테스트 단계

## openpilot의 핵심 기능

### 1. Adaptive Cruise Control (ACC)

**일반 크루즈 컨트롤**
```
설정 속도 유지만 가능
앞차가 느려지면 → 운전자가 브레이크
```

**openpilot ACC**
```
앞차 거리 자동 유지
앞차가 느려지면 → 자동 감속
앞차가 멈추면 → 자동 정지
앞차가 출발하면 → 자동 출발
```

### 2. Lane Keeping Assist (LKA)

**기존 LKA**
```
차선 벗어나면 → 경고음 또는 약한 보정
```

**openpilot LKA**
```
차선 중앙을 지속적으로 유지
커브길도 부드럽게 추종
```

### 3. Driver Monitoring

**운전자 감시 시스템**
```
내부 카메라로 운전자 얼굴 추적
- 눈 깜빡임 감지
- 고개 방향 감지
- 부주의 감지 시 경고
```

## 데이터와 프라이버시

### 수집되는 데이터

**기본 수집** (opt-out 가능)
- 전면 카메라 영상
- CAN 버스 데이터 (차량 상태)
- GPS 위치 및 속도
- 센서 데이터 (IMU, 자이로)

**선택 수집** (opt-in 필요)
- 내부 카메라 (운전자)
- 마이크

### 데이터 사용

**목적**
1. AI 모델 학습
2. openpilot 개선
3. 버그 분석

**접근**
- comma connect에서 본인 데이터 확인 가능
- 다운로드 가능
- 삭제 요청 가능

## openpilot의 장점

### 1. 오픈소스
```python
# 모든 코드를 볼 수 있습니다
def compute_path_pinv(l_prob, r_prob, ...):
    # 경로 계산 로직
    ...
    
# 수정도 가능합니다!
```

### 2. 지속적인 발전

**업데이트 주기**
- 코드: 매일 수십 건의 커밋
- 안정 버전: 2-3주마다 릴리스
- AI 모델: 월 1-2회 업데이트

### 3. 커뮤니티

**전 세계 개발자들이 기여**
- GitHub: 수천 명의 기여자
- Discord: 활발한 토론
- 바운티 프로그램: 기능 개발 보상

### 4. 범용성

**300+ 차량 지원**
- 차량을 바꿔도 계속 사용 가능
- 중고 차량에도 설치 가능

## openpilot의 한계

### 기술적 한계

❌ **작동하지 않는 상황**
```
1. 차선이 불분명한 도로
2. 눈/비로 카메라가 가려진 경우
3. 급격한 날씨 변화
4. 복잡한 교차로
5. 비포장 도로
```

### 법적 한계

⚠️ **지역별 법규 확인 필요**
- 한국: 운전자 보조 시스템으로 사용 시 합법
- 운전자가 항상 책임
- 사고 시 운전자 책임

## 비용 분석

### 초기 비용

| 항목 | 가격 |
|------|------|
| comma 3X | $1,299 |
| 차량 하네스 | $100-200 |
| 배송비 | ~$50 |
| **총** | **~$1,500** |

### 유지 비용

| 항목 | 가격 |
|------|------|
| 소프트웨어 업데이트 | 무료 |
| comma Prime (선택) | $99/년 |
| LTE 데이터 (선택) | 포함 또는 별도 |

**comma Prime 혜택**
- 무제한 데이터 저장
- LTE 연결
- 실시간 모니터링

## 실제 사용자들의 경험

### 긍정적 피드백

👍 **"고속도로가 편해졌어요"**
- 장거리 운전 피로 감소
- 정체 구간에서 큰 도움

👍 **"계속 발전하네요"**
- 정기적인 업데이트
- 새로운 기능 추가

👍 **"커뮤니티가 좋아요"**
- 활발한 지원
- 문제 해결 빠름

### 주의사항

⚠️ **"항상 주의해야 해요"**
- 방심하면 위험
- 완벽하지 않음

⚠️ **"모든 상황에서 작동하지 않아요"**
- 날씨, 도로 상태 영향
- 완전 자율주행 아님

## 정리

**openpilot은...**

✅ 레벨 2 자율주행 시스템
✅ 완전 오픈소스 (MIT)
✅ 300+ 차량 지원
✅ 지속적인 발전
✅ 활발한 커뮤니티

❌ 완전 자율주행 아님
❌ 모든 상황 대응 불가
❌ 운전자 감시 필수

**핵심**: openpilot은 강력한 **운전자 보조** 시스템입니다.

---

**다음 장에서는...**

openpilot을 사용하거나 개발하기 위해 준비해야 할 것들을 알아보겠습니다.

[다음: 3. 준비하기 →](https://github.com/dinnerandcoffee/openpilot-learning-guide/blob/main/docs/03-prerequisites.md)
